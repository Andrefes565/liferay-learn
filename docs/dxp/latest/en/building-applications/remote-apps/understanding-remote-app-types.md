# Understanding Remote App Types

Remote Apps uses Liferay's front-end infrastructure to register external JS applications with the Liferay platform and render them as Page widgets. When creating a Remote App entry, you can select between the [IFrame](#using-the-iframe-type) and [Custom Element](#using-the-custom-element-type) types. This determines how the external application is registered with Liferay DXP and rendered in Site Pages.

Both types of Remote Apps are integrated into Pages as a widget during the render Page lifecycle. This widget is automatically generated by Liferay at entry creation. Liferay also generates OSGi details for each Remote App entry, so that its widget has a basic level of OSGi presence. If desired, you can set additional properties at the entry or widget level to configure how both IFrame and Custom Element applications are rendered.

However, IFrame and Custom Element applications are hosted and rendered differently. They also have different levels of access to Liferay services and runtime data. <!--TASK: Refine-->

```{tip}
Due to limitations, the [IFrame](#using-the-iframe-type) Remote App type is not recommended for complex use cases. Instead, use the [Custom Element](#using-the-custom-element-type) type for more complex scenarios.
```

## Using the IFrame Type

The IFrame type renders external applications into a separate `<iframe>` element and allows for limited interaction with the host page using Liferay's client SDK API. The architecture for IFrame applications includes three main parts: the Liferay server, the Liferay host Page, and the external server hosting your application.

![The IFrame architecture includes a Remote App entry in the Liferay server, an application hosted on an external server, and the Liferay Page with the Remote App widget.](./understanding-remote-app-types/images/01.png)

Each IFrame entry stores an IFrame URL that links to an application served from an external server with its markup, scripts, client SDK, and styles. They can also store properties rendered with the application during runtime.

When the Remote App's widget is added to a Page, it's rendered as an `<iframe>` element using the [`_renderIFrame`](https://github.com/liferay/liferay-portal/blob/7bf2fe6b90af5f50a2fd3d0d77f1148fb71fc339/modules/apps/remote-app/remote-app-web/src/main/java/com/liferay/remote/app/web/internal/portlet/RemoteAppEntryPortlet.java#L166-L210) method from the [`RemoteAppEntryPortlet`](https://github.com/liferay/liferay-portal/blob/7bf2fe6b90af5f50a2fd3d0d77f1148fb71fc339/modules/apps/remote-app/remote-app-web/src/main/java/com/liferay/remote/app/web/internal/portlet/RemoteAppEntryPortlet.java) class. This method populates the element with the external application's content. If the entry includes properties, they are added to the IFrame URL when rendered (`<iframe (+properties)/>`).

```{note}
To set up an IFrame Remote App, the application must be running on its external server. By contrast, setting up [Custom Element Remote Apps](#using-the-custom-element-type) only requires the application's code to be stored in an accessible location.
```

By default, all browsers impose the same-origin policy for IFrame applications to prevent information flow between a host page and its external applications. Liferay's client SDK API is provided to allow limited communication between IFrame elements and a Liferay Page.

If the application uses the Liferay client SDK, it can make service calls to the DXP server and access state details. This includes opening a toast in the host Page, calling headless APIs, running GraphQL queries, accessing style properties, and more. <!-- Q: How is the client SDK API provided? -->

```{note}
When fetching portal URLs and running queries, the client SDK API allows IFrame Remote Apps to act on behalf of the current logged in user.
```

## Using the Custom Element Type

The Custom Element type renders external application code into a separate HTML `<custom-element>` and provides full integration with the Liferay host Page. The architecture for Custom Element applications includes three main parts: the Liferay server, the Liferay host Page, and the server storing your application's code. These files are used by Liferay to create the application in a browser.

![The Custom Element architecture includes a Remote App entry in the Liferay server, application code stored on a server, and the Liferay Page with the Remote App widget.](./understanding-remote-app-types/images/02.png)

Each Custom Element entry includes an HTML element name, as well as URLs to any necessary JS and CSS files. They can also include properties rendered with the application during runtime.

Once added to a Page, Liferay inserts the Remote App's JS and CSS files directly into the Page via `<script>` and `<link>` elements. When loaded, the JS declares and instantiates the application, while the CSS files style it.

```{important}
The provided Custom Element implementation must also use an IIFE. This ensures the JS function runs in the browser as soon as it's loaded. 
```

The entry's widget then renders the application's mark up in a `<custom-element>` using the [`_renderCustomElement`](https://github.com/liferay/liferay-portal/blob/7bf2fe6b90af5f50a2fd3d0d77f1148fb71fc339/modules/apps/remote-app/remote-app-web/src/main/java/com/liferay/remote/app/web/internal/portlet/RemoteAppEntryPortlet.java#L116-L164) method from the [`RemoteAppEntryPortlet`](https://github.com/liferay/liferay-portal/blob/7bf2fe6b90af5f50a2fd3d0d77f1148fb71fc339/modules/apps/remote-app/remote-app-web/src/main/java/com/liferay/remote/app/web/internal/portlet/RemoteAppEntryPortlet.java) class. This element functions as an extension mechanism for HTML that creates new tags and associates them with custom logic. If the entry includes properties, they are added to the Custom Element URL when rendered (`<custom-element (+props)/>`).

Once rendered, the application has full access the Liferay JS API and style classes. However, if you use Shadow DOM to isolate the DOM created within the `<custom-element>`, it won't receive any style information from the Liferay host Page.

```{note}
When multiple instances of the Custom Element widget are added to a page, Liferay only includes the application's URLs once.
```

## Additional Information

* [Remote Apps Overview](../remote-apps.md)
* [Creating a Liferay Remote App](./creating-a-liferay-remote-app.md)
* [Remote Apps UI Reference](./remote-apps-ui-reference.md)
